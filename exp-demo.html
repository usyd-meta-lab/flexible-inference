<!DOCTYPE html>
<html>
  <head>
    <title>USYD Cognitive Flexibility</title>
    <script src="jspsych-6.3.1/jspsych.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.3.2/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jcanvas/21.0.1/min/jcanvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/1.0.2/chartjs-plugin-annotation.js"></script>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.0/jquery-ui.min.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/foundation.min.js'></script>
    <script src="jspsych-6.3.1/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.3.1/plugins/jspsych-preload.js"></script>
    <script src="js/flexible-inference.js"></script>
    <script src="Editable-Parameters.js"></script>
    <script src="jspsych-6.3.1/plugins/jspsych-html-button-response.js"></script>
    <script src="jspsych-6.3.1/plugins/jspsych-fullscreen.js"></script>
    
    <script src="jspsych-6.3.1/plugins/jspsych-survey-text.js"></script>
    
    <link href="css/custom.css" rel="stylesheet" type="text/css"></link>
    <link href="css/jspsych.css" rel="stylesheet" type="text/css"></link>
  </head>
  <body>
  </body>
  <script>



//**********************//
// CPS Demo
//**********************//


// Experiment Paramaters
  experimentname = "FI" // Should correspond to the foldername on the cogflex server
  user = 'kit' // Should correspind to the user on the cogflex server
  ID = jsPsych.randomization.randomID();

//**********************//
// Trial types
//**********************//

// Fullscreen
  var full = {
  type: 'fullscreen',
    fullscreen_mode: true
  }









//**********************//
// Experiment
//**********************//


 jsPsych.init({
        timeline: [preload, test_block],
        on_timeline_start: function(){
            trialnum = 1
        },
        on_finish: function(data){
     //jsPsych.data.displayData('csv');
     var filestore = ID + '.csv'; var all_data = jsPsych.data.get(); saveData(filestore, experimentname, all_data.csv()); alert(end_message); goHome()}
    });



//**********************//
// SAVING
//**********************//

// Add properties
jsPsych.data.addProperties({ID: ID});

// Save
function saveData(filename, experiment, filedata){
    	var filename = '../users/'+user+'/' + experiment + '/Data/' + filename;
       $.ajax({
          type:'post',
          cache: false,
          url: 'http://cogflex.com.au/jspsych/jsPsych.php', // this is the path to the above PHP script
          data: {filename: filename, filedata: filedata}
       });
    }






  </script>
</html>
